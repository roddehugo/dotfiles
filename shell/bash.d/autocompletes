#!/usr/bin/env bash

# Load bash completions.
_load_completions() {
    # Load completion installed via Homebrew
    [ -f /usr/local/etc/bash_completion ] && . /usr/local/etc/bash_completion

    # Load completion installed in this repository
    local dir=$HOME/.bash.d/completions
    if [ -d "$dir" ] && [ -x "$dir" ]; then
        for i in $(LC_ALL=C command ls "$dir"); do
            [ -f "$dir/$i" ] && . "$dir/$i"
        done
    fi
}
_load_completions

# Add completion for marks shortcuts
_completemarks() {
  local curw=${COMP_WORDS[COMP_CWORD]}
  local wordlist=$(find $MARKPATH -type l | awk -F"/" '{printf "%s ",$NF}')
  COMPREPLY=($(compgen -W '${wordlist[@]}' -- "$curw"))
  return 0
}
complete -F _completemarks jump unmark

# Enable git command autocompletion for 'g' as well
__git_complete g __git_main
